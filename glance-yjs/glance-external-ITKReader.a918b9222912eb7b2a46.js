!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(self,(function(){return(self.webpackChunkglance=self.webpackChunkglance||[]).push([[3],{588:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D},extensions:function(){return x},imageExtensions:function(){return v},polyDataExtensions:function(){return h},registerToGlance:function(){return b}});var a=n(589),r=n(590),i=n(513),o=n.n(i),s=n(744),c=n(113),m=n.n(c),l=n(591),g=(n(344),n(9)),p=n(73),f=n(592);const{convertItkToVtkImage:d}=p.Z;function u(e){const t=e.lastIndexOf(".");return`Scalars ${t>-1?e.substring(0,t):e}`}const y={fileName:"",arrayName:null};function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,y,n),g.ZP.obj(e,t),g.ZP.algo(e,t,0,1),g.ZP.setGet(e,t,["fileName","arrayName"]),function(e,t){t.classHierarchy.push("vtkITKDicomImageReader"),e.readFileSeries=n=>n&&n.length&&n!==t.files?(t.files=n,(0,f.Z)(n).then((e=>{let{image:t}=e;return t})).then((n=>{const a=d(n,{scalarArrayName:t.arrayName||u(t.fileName)});t.output[0]=a,e.modified()}))):Promise.resolve(),e.requestData=()=>{e.readFileSeries(t.files,t.fileName)}}(e,t)}var k={newInstance:g.ZP.newInstance(T,"vtkITKDicomImageReader"),extend:T};a.ZP.setReadImageArrayBufferFromITK(s.Z),r.ZP.setReadPolyDataArrayBufferFromITK(l.Z);const I=new Set(Array.from(o().keys()).map((e=>e.toLowerCase())));I.delete("json");const v=Array.from(I),h=Array.from(new Set(Array.from(m().keys()).map((e=>e.toLowerCase())))),x=v.concat(h);function b(e){e&&(v.filter((e=>"dcm"!==e)).forEach((t=>e.registerReader({extension:t,name:`${t.toUpperCase()} Reader`,vtkReader:a.ZP,binary:!0,fileNameMethod:"setFileName"}))),h.forEach((t=>e.registerReader({extension:t,name:`${t.toUpperCase()} Reader`,vtkReader:r.ZP,binary:!0,fileNameMethod:"setFileName"}))),e.registerReader({extension:"dcm",name:"DICOM File Series Reader",vtkReader:k,fileNameMethod:"setFileName",fileSeriesMethod:"readFileSeries",binary:!0}))}var D={extensions:x,registerToGlance:b};b(("undefined"==typeof window?{}:window).Glance)},73:function(e,t,n){"use strict";var a=n(71),r=n(15),i=n(4);const{vtkErrorMacro:o}=a.ZP,s=1,c=2,m=3,l=4,g=5,p=6,f=7,d=8,u=9,y=10,T=11,k=12,I=13,v=14,h=15;const x=new Map([["Uint8Array","uint8_t"],["Int8Array","int8_t"],["Uint16Array","uint16_t"],["Int16Array","int16_t"],["Uint32Array","uint32_t"],["Int32Array","int32_t"],["Float32Array","float"],["Float64Array","double"]]);t.Z={convertItkToVtkImage:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={origin:[0,0,0],spacing:[1,1,1]},a=[1,1,1],x=[1,0,0,0,1,0,0,0,1];for(let t=0;t<e.imageType.dimension;++t){n.origin[t]=e.origin[t],n.spacing[t]=e.spacing[t],a[t]=e.size[t];for(let n=0;n<e.imageType.dimension;++n)x[n+3*t]=e.direction.data[t+n*e.imageType.dimension]}const b=r.ZP.newInstance(n),D=i.ZP.newInstance({name:t.scalarArrayName||"Scalars",values:e.data,numberOfComponents:e.imageType.components});switch(b.setDirection(x),b.setDimensions(...a),b.getPointData().setScalars(D),e.imageType.pixelType){case s:case c:case m:case l:break;case g:3===e.imageType.dimension&&3===e.imageType.components&&b.getPointData().setVectors(D);break;case p:break;case f:3===e.imageType.dimension&&3===e.imageType.components&&b.getPointData().setVectors(D);break;case d:case u:3===e.imageType.dimension&&6===e.imageType.components&&b.getPointData().setTensors(D);break;case y:case T:case k:case I:case v:case h:break;default:return o(`Cannot handle unexpected ITK.js pixel type ${e.imageType.pixelType}`),null}return b},convertVtkToItkImage:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={imageType:{dimension:3,pixelType:s,componentType:"",components:1},name:"name",origin:e.getOrigin(),spacing:e.getSpacing(),direction:{data:[1,0,0,0,1,0,0,0,1]},size:e.getDimensions()},a=e.getDirection(),r=n.size.length;n.imageType.dimension=r,n.direction.rows=r,n.direction.columns=r;for(let e=0;e<r;++e)for(let t=0;t<r;++t)n.direction.data[e+t*r]=a[t+e*r];const i=e.getPointData();let o;return null!==i.getTensors()?(n.imageType.pixelType=u,o=i.getTensors()):null!=i.getVectors()?(n.imageType.pixelType=g,o=i.getVectors()):o=i.getScalars(),n.imageType.componentType=x.get(o.getDataType()),n.data=t?o.getData().slice(0):o.getData(),n}}},389:function(){}},function(e){return e.O(0,[1],(function(){return t=588,e(e.s=t);var t})),e.O()}])}));